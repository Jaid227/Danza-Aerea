
<!DOCTYPE html>
<html>
<head>
  <title>Comentarios con Sheets</title>
  <link rel="stylesheet" href="estilos.css">
</head>

<body>

<h1>Comentarios</h1>

<div class="formulario">
  <input id="nombre" placeholder="Tu nombre">

  <textarea id="mensaje"
    placeholder="Escribe tu comentario">
  </textarea>

  <button onclick="enviar()">
    Enviar
  </button>
</div>

<h2>Mensajes:</h2>

<div id="lista"></div>


<script>

// ðŸ‘‰ PON AQUÃ TU URL REAL
const API =
"https://script.google.com/macros/s/TU_URL/exec";



// ===== ENVIAR =====
function enviar(){

  let nombre =
   document.getElementById("nombre").value;

  let mensaje =
   document.getElementById("mensaje").value;

  if(!nombre || !mensaje){
    alert("Llena todo");
    return;
  }

  fetch(API, {
    method: "POST",
    body: JSON.stringify({
      nombre: nombre,
      mensaje: mensaje
    })
  })
  .then(r => r.text())
  .then(() => {
     document.getElementById("mensaje").value="";
     cargar();
  });

}



// ===== LEER =====
function cargar(){

  fetch(API)
  .then(r => r.json())
  .then(datos => {

    let html = "";

    datos.reverse().forEach(d => {

      html += `
      <div class="comentario">
        <b>${d.nombre}</b>
        <p>${d.mensaje}</p>
        <small>${d.fecha}</small>
      </div>
      `;

    });

    document.getElementById("lista")
            .innerHTML = html;

  });

}


cargar();

</script>

</body>
</html>





